<!DOCTYPE html>
<html>
<head>

<link rel="stylesheet" href="css/main.css" type="text/css">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>

<script>
	var peakA = 1;
	var peakB = 0;
	var peakC = 0;
	
 	$(function() {
	    $( ".draggable" ).draggable({containment: '#game'});
	    $( ".droppable" ).droppable({
	      drop: function( event, ui ) {
	        validateMove(event, ui, this.id)
	      }
	    });
	});
  
	function validateMove(event, ui, target)
	{
		object = detectObject(event);  	// detect object we are moving
		addToTower(object, target);	
	}
	
	function detectObject(event)
	{
		moving_obj = event.toElement;
		return moving_obj;	
	}
	
	function addToTower(object, target)
	{
		var peak
		
		switch (target) {
		case 'A':
			peak = peakA++;
			break; 
			
		case 'B':
			peak = peakB++;
			break;
			
		case 'C':
			peak = peakC++;
			break;
		}
		
		destination_row = "" + target + peak;
		$('#' + destination_row).html(object);
		$('#' + object.id).css({'left': 0, 'top': 0});			// ensures image stays inside of <td>
		
		switch (object.title) {
		case 'A':
			peakA--;
			break;
		case 'B':
			peakB--;
			break;
		case 'C':
			peakC--;
			break;
		}
		console.log(object.title);
		$('#' + object.id).attr('title', target);
	}
	
  </script>


</head>

<body>
	<div id='wrapper'>
	
		<div id='game'>
			<div id='tower1' class='tower' class='droppable'>
				<table id='A' class='droppable'> 
					<tr><td id='A7'></td></tr>
					<tr><td id='A6'></td></tr>
					<tr><td id='A5'></td></tr>
					<tr><td id='A4'></td></tr>
					<tr><td id='A3'></td></tr>
					<tr><td id='A2'></td></tr>
					<tr><td id='A1'></td></tr>
					<tr><td id='A0'><img id='level0' title='A' class='draggable' class='ui-state-highlight' src='img/level0.png'></td></tr>
				</table>
			</div>	
				
			<div id='tower2' class='tower'>
				<table id='B' class='droppable'> 
					<tr><td id='B7'></td></tr>
					<tr><td id='B6'></td></tr>
					<tr><td id='B5'></td></tr>
					<tr><td id='B4'></td></tr>
					<tr><td id='B3'></td></tr>
					<tr><td id='B2'></td></tr>
					<tr><td id='B1'></td></tr>
					<tr><td id='B0'></td></tr>
				</table>
			</div>
			
			<div id='tower3' class='tower'>
				<table id='C' class='droppable'> 
					<tr><td id='C7'></td></tr>
					<tr><td id='C6'></td></tr>
					<tr><td id='C5'></td></tr>
					<tr><td id='C4'></td></tr>
					<tr><td id='C3'></td></tr>
					<tr><td id='C2'></td></tr>
					<tr><td id='C1'></td></tr>
					<tr><td id='C0'></td></tr>
				</table>
			</div>	
		</div>
	
	</div>
</body>

</html>
